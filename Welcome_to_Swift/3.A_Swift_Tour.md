## å¿«é€Ÿå¼€å§‹

æŒ‰ç…§ä¼ ç»Ÿï¼Œç¬¬ä¸€ä¸ªç¨‹åºæ˜¯æ‰“å°ä¸€ä¸ªâ€œHello, world!â€ã€‚åœ¨ Swift ä¸­ï¼Œåªéœ€è¦ä¸€è¡Œä»£ç ï¼š
```swift
print("Hello, world!")
// Prints "Hello, world!"
```
å¦‚æœä½ ä¼šå…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯­æ³•å¯¹ä½ åº”è¯¥å¾ˆç†Ÿæ‚‰ã€‚åœ¨Swiftä¸­ï¼Œè¿™ä¸€è¡Œä»£ç æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¨‹åºã€‚ä½ ä¸éœ€è¦å¼•å…¥é¢å¤–çš„è¾“å…¥/è¾“å‡ºæˆ–å¤„ç†å­—ç¬¦ä¸²çš„åº“ã€‚åœ¨å…¨å±€èŒƒå›´ç¼–å†™çš„ä»£ç ä¼šä½œä¸ºç¨‹åºçš„å…¥å£ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦ç¼–å†™`main()`å‡½æ•°ã€‚ä¹Ÿä¸éœ€è¦åœ¨æ¯ä¸ªå£°æ˜çš„æœ«å°¾å†™ä¸Šåˆ†å·ï¼ˆ;ï¼‰ã€‚

æœ¬å¯¼è§ˆé€šè¿‡å±•ç¤ºå®Œæˆå¤šç§ä¸åŒç¼–ç¨‹ä»»åŠ¡ï¼Œä¸ºä½ æä¾›è¶³å¤Ÿä¿¡æ¯æ¥å¼€å§‹ç”¨Swiftç¼–å†™ä»£ç ã€‚å¦‚æœæœ‰ä¸æ‡‚çš„åœ°æ–¹ï¼Œè¯·ä¸è¦æ‹…å¿ƒï¼Œæœ¬å¯¼è§ˆåé¢ä¼šç»™å‡ºè§£é‡Šã€‚

### ç®€å•çš„å€¼
ç”¨`let`åˆ›å»ºå¸¸é‡ï¼Œç”¨`var`åˆ›å»ºå˜é‡ã€‚åœ¨ç¼–è¯‘æ—¶ä¸éœ€è¦çŸ¥é“å¸¸é‡çš„å€¼ï¼Œä½†å¿…é¡»ä¸ºå¸¸é‡æŒ‡å®šä¸€æ¬¡å€¼ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨å¸¸é‡å®šä¹‰æŒ‡å®šä¸€æ¬¡å¤šå¤„ä½¿ç”¨çš„å€¼ã€‚
```swift
var myVariable = 42
myVariable = 50
let myConstant = 42
```
ä¸€ä¸ªå¸¸é‡æˆ–å˜é‡å¿…é¡»æ‹¥æœ‰ä¸ä½ æ‰€æŒ‡å®šçš„å€¼ä¸€è‡´çš„ç±»å‹ã€‚ä½†ï¼Œä½ ä¸å¿…æ¯æ¬¡éƒ½æ˜¾å¼æŒ‡å®šç±»å‹ã€‚åˆ›å»ºå¸¸é‡æˆ–å˜é‡çš„æ—¶å€™é¡ºä¾¿æä¾›ä¸€ä¸ªå€¼ï¼Œç¼–è¯‘å™¨ä¼šæ¨å¯¼ç±»å‹ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç¼–è¯‘å™¨æˆ–æ¨å¯¼å‡º`myVariable`çš„ç±»å‹æ˜¯æ•´æ•°å‹ï¼Œå› ä¸ºåˆå§‹å€¼æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚

å¦‚æœåˆå§‹å€¼æ²¡æœ‰æä¾›è¶³å¤Ÿçš„ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œæ²¡æœ‰è®¾ç½®åˆå§‹å€¼ï¼‰ï¼Œåˆ™é€šè¿‡åœ¨å˜é‡åé¢åŠ ä¸Šç±»å‹ä»¥æŒ‡å®šï¼Œç±»å‹ä¸å˜é‡ç”¨å†’å·ï¼ˆ:ï¼‰éš”å¼€ã€‚
```swift
let implicitInteger = 70
let implicitDouble = 70.0
let explicitDouble: Double = 70
```

> è¯•ä¸€è¯•ï¼š
> åˆ›å»ºä¸€ä¸ªå¸¸é‡ï¼Œæ˜¾å¼æŒ‡å®šä¸º`Float`ç±»å‹ï¼Œå€¼è®¾ç½®ä¸º`4`ã€‚

ä¸€ä¸ªç±»å‹çš„å€¼ä¸éšå¼è½¬æ¢ä¸ºå…¶ä»–ç±»å‹ã€‚å¦‚æœä½ éœ€è¦å°†ä¸€ä¸ªå€¼è½¬æ¢ä¸ºå¦ä¸€ä¸ªç±»å‹ï¼Œæ˜¾å¼åœ°åˆ›å»ºä¸€ä¸ªéœ€è¦ç±»å‹çš„å®ä¾‹ã€‚
```swift
let label = "The width is "
let width = 94
let widthLabel = label + String(width)
```
> è¯•ä¸€è¯•ï¼š
> å»æ‰`String`è½¬æ¢å™¨ï¼Œçœ‹çœ‹ä¼šæŠ¥ä»€ä¹ˆé”™ï¼Ÿ

æœ‰ä¸€ä¸ªç®€å•æ–¹æ³•åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥å€¼ï¼šå°†å€¼æ”¾åœ¨æ‹¬å·ä¸­ï¼Œç„¶ååœ¨æ‹¬å·å‰é¢åŠ æ–œæ ã€‚ä¾‹å¦‚ï¼š
```swift
let apples = 3
let oranges = 5
let appleSummary = "I have \(apples) apples."
let fruitSummary = "I have \(apples + oranges) pieces of fruit."
```

> è¯•ä¸€è¯•ï¼š
> ä½¿ç”¨`\()`åœ¨å­—ç¬¦ä¸²ä¸­åŒ…å«ä¸€ä¸ªæµ®ç‚¹è®¡ç®—ï¼Œå¹¶åœ¨é—®å€™ä¸­åŒ…å«äººåã€‚

ç”¨è¿ç»­çš„ä¸‰ä¸ªå¼•å·ï¼ˆ"""ï¼‰åˆ›å»ºå ç”¨å¤šè¡Œçš„å­—ç¬¦ä¸²ã€‚å¼•å·ä¸­å­—ç¬¦ä¸²çš„ç¼©è¿›è¢«å¿½è§†ï¼Œç¼©è¿›ä¸æœ«å°¾çš„å¼•å·ä¿æŒä¸€è‡´ã€‚ä¾‹å¦‚ï¼š
```swift
let quotation = """
        Even though there's whitespace to the left,
        the actuall lines aren't indented.
            Except for this line.
        Double quotes (") can appear without being escaped.

        I still have \(apples + oranges) pieces of fruit.
        """
```

ç”¨æ–¹æ‹¬å·ï¼ˆ`[]`ï¼‰åˆ›å»ºæ•°ç»„æˆ–å­—å…¸ï¼Œç”¨æ–¹æ‹¬å·æ‹¬èµ·ç´¢å¼•æˆ–é”®çš„æ–¹å¼æ¥è®¿é—®å…ƒç´ ã€‚æœ€åä¸€ä¸ªå…ƒç´ åé¢å¯ä»¥å¸¦ä¸Šé€—å·ï¼ˆ,ï¼‰ã€‚
```swift
var shoppingList = ["catfish", "water", "tulips"]
shoppingList[1] = "bottle of water"

var occupations = [
    "Malcolm": "Captain",
    "Kaylee": "Mechanic",
]
occupations["Jayne"] = "Public Relations"
```

æ•°ç»„ä¼šéšç€å…ƒç´ çš„åŠ å…¥è€Œè‡ªåŠ¨å¢é•¿ã€‚
```swift
fruits.append("blueberries")
print(fruits)
// Prints "["strawberries", "grapes", "tangerines", "blueberries"]"
```

ä¹Ÿå¯ä»¥ç”¨æ‹¬å·ç¼–å†™ç©ºæ•°ç»„æˆ–ç©ºå­—å…¸ã€‚å¯¹äºæ•°ç»„ï¼Œç¼–å†™ `[]`ï¼›å¯¹äºå­—å…¸ï¼Œç¼–å†™`[:]`ã€‚
```swift
fruits = []
occupations = [:]
```

å¦‚æœä½ ç»™ä¸€ä¸ªæ–°å˜é‡èµ‹å€¼ç©ºæ•°ç»„æˆ–ç©ºå­—å…¸ï¼Œæˆ–å…¶ä»–èµ‹å€¼ç»™å…¶ä»–æ²¡æœ‰ç±»å‹ä¿¡æ¯çš„åœ°æ–¹ï¼Œä½ éœ€è¦æŒ‡æ˜ç±»å‹ã€‚
```swift
let emptyArray: [String] = []
let emptyDictionary: [String: Float] = [:]
```

### æ§åˆ¶æµ
ç”¨`if`å’Œ`switch`å®ç°æ¡ä»¶è¯­å¥ï¼Œä½¿ç”¨`for-in`ã€`while`å’Œ`repeat-while`å®ç°å¾ªç¯è¯­å¥ã€‚æ¡ä»¶æˆ–å¾ªç¯çš„æ‹¬å·æ˜¯å¯é€‰çš„ã€‚æ¡ä»¶ä½“å’Œå¾ªç¯ä½“çš„å¤§æ‹¬å·ï¼ˆ`{}`ï¼‰æ˜¯å¿…é¡»çš„ã€‚
```swift
let individualScores = [75, 43, 103, 87, 12]
var teamScore = 0
for score in individualScores {
  if score > 50 {
    teamScore += 3
  } else {
    teamScore += 1
  }
}
print(teamScore)
// Prints "11"
```
`if`è¯­å¥ä¸­ï¼Œæ¡ä»¶è¯­å¥å¿…é¡»æ˜¯å¸ƒå°”è¯­å¥ï¼Œè¿™æ„å‘³ç€`if score { ... }`æ˜¯é”™è¯¯çš„ï¼Œå¹¶ä¸ä¼šéšå¼åœ°ä¸`0`åšæ¯”è¾ƒã€‚

ä½ å¯ä»¥åœ¨ä¸€ä¸ªå£°æ˜çš„èµ‹å€¼ç¬¦å·ï¼ˆ=ï¼‰åè¾¹ç¼–å†™ `if` æˆ– `switch` ï¼Œä»¥é€‰æ‹©ä¸€ä¸ªåŸºäºè¯¥æ¡ä»¶çš„å€¼ã€‚
```swift
let scoreDecoration = if teamScore > 10 {
    "ğŸ‰"
} else {
    ""
}
print("Score:", teamScore, scoreDecoration)
// Prints "Score: 11 ğŸ‰"
```

ä½ å¯ä»¥ç”¨`if`å’Œ`let`æ¥å¤„ç†å¯èƒ½ç¼ºå¤±çš„å€¼ã€‚ï¼ˆå¯èƒ½ç¼ºå¤±çš„å€¼ï¼‰ä»¥å¯é€‰å€¼çš„æ–¹å¼å‘ˆç°ã€‚å¯é€‰å€¼åŒ…å«ä¸€ä¸ªå€¼æˆ–`nil`ï¼Œè¡¨æ˜è¯¥å€¼å¯èƒ½ç¼ºå¤±ã€‚åœ¨ç±»å‹åé¢å†™ä¸Šé—®å·ï¼ˆ`?`ï¼‰å°†å€¼æ ‡æ˜ä¸ºå¯é€‰å€¼ã€‚
```swift
var optionalString: String? = "Hello"
print(optionalString == nil)
// Prints "false"

var optionalName: String? = "John Appleseed"
var greeting = "Hello!"
if let name = optionalName {
  greeting = "Hello, \(name)"
}
```

> è¯•ä¸€è¯•ï¼šå°†`optionalName`æ”¹æˆ`nil`ï¼Œ`greeting`å°†å¾—åˆ°ä»€ä¹ˆï¼Ÿæ·»åŠ ä¸€ä¸ª`else`è¯­å¥ï¼Œå½“`optionalName`æ˜¯`nil`çš„æ—¶å€™ï¼Œä¸º`greeting`è®¾ç½®ä¸åŒçš„å€¼ã€‚

å¦‚æœå¯é€‰å€¼æ˜¯`nil`ï¼Œæ¡ä»¶ä¸º`false`ï¼Œå¤§æ‹¬å·ä¸­çš„ä»£ç å°†è¢«è·³è¿‡ã€‚å¦åˆ™ï¼Œå°†ä»å¯é€‰å€¼ä¸­è§£åŒ…ï¼Œç„¶åæŒ‡å®šç»™`let`åé¢çš„å¸¸é‡ï¼Œè¿™æ ·èƒ½ä½¿è§£åŒ…å‡ºæ¥çš„å€¼åœ¨ä»£ç å—ä¸­èƒ½è¢«è®¿é—®ã€‚

å¦å¤–ä¸€ä¸ªå¤„ç†å¯é€‰å€¼çš„æ–¹æ³•æ˜¯é€šè¿‡`??`æ“ä½œç¬¦æä¾›é»˜è®¤å€¼ã€‚å¦‚æœå¯é€‰å€¼ç¼ºå¤±ï¼Œå°±ç”¨é»˜è®¤å€¼ã€‚
```swift
let nickName: String? = nil
let fullName: String = "John Appleseed"
let informalGreeting = "Hi \(nickName ?? fullName)"
```

ä½ å¯ä»¥ç”¨ç®€åŒ–çš„å†™æ³•è§£åŒ…ä¸€ä¸ªå€¼ï¼Œå³ç”¨ç›¸åŒçš„å˜é‡åæ¥è¡¨ç¤ºè¢«è§£åŒ…çš„å€¼ã€‚
```swift
if let nickname {
    print("Hey, \(nickname)")
}
```

Switchesè¯­å¥æ”¯æŒä»»ä½•ç±»å‹çš„æ•°æ®å’Œå¤šç§æ¯”è¾ƒè¿ç®— - ä¸ä»…é™äºæ•´æ•°å’Œç­‰å¼æ¯”è¾ƒã€‚
```swift
let vegetable = "red pepper"
switch vegetable {
  case "celery":
    print("Add some raisins and make ants on a log.")
  case "cucumber", "watercress":
    print("That would make a good tea sandwish.")
  case let x where x.hasSuffix("pepper"):
    print("Is it a spicy \(x)?")
  default:
    print("Everything tastes good in soup.")
}
// Prints "Is it a spicy red pepper?"
```
> è¯•ä¸€è¯•ï¼šå»æ‰`default`åˆ†æ”¯ï¼Œçœ‹çœ‹æŠ¥ä»€ä¹ˆé”™ï¼Ÿ

æ³¨æ„å¦‚æœåœ¨æ¨¡å¼ä¸­ç”¨`let`å¦‚ä½•å°†åŒ¹é…çš„å€¼èµ‹å€¼ç»™å¸¸é‡ã€‚

æ‰§è¡Œå®ŒåŒ¹é…çš„åˆ†æ”¯ä¹‹åï¼Œç¨‹åºé€€å‡ºswitchè¯­å¥ã€‚ä¸ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªåˆ†æ”¯ï¼ˆ`case`ï¼‰ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦åœ¨åˆ†æ”¯åé¢æ˜¾å¼åœ°åŠ ä¸Š`break`ã€‚

ç”¨`for-in`ä¸ºæ¯ä¸ªé”®å€¼å¯¹æä¾›ä¸€å¯¹åç§°çš„æ–¹å¼éå†å­—å…¸ã€‚å­—å…¸æ˜¯æ— åºçš„é›†åˆï¼Œæ‰€ä»¥é”®å€¼è¢«éšæœºéå†ã€‚
```swift
let interestingNumbers = [
    "Prime": [2, 3, 5, 7, 11, 13],
    "Fibonacci": [1, 1, 2, 3, 5, 8],
    "Square": [1, 4, 9, 16, 25],
]
var largest = 0
for (kind, numbers) in interestingNumbers {
    for number in numbers {
        if number > largest {
            largest = number
        }
    }
}
print(largest)
// Prints "25"
```
> è¯•ä¸€è¯•ï¼šæ·»åŠ ä¸€ä¸ªå˜é‡ï¼Œè¿½è¸ªå“ªç§æ•°å­—æœ€å¤§ï¼Œæœ€å¤§çš„æ•°æ˜¯ä»€ä¹ˆã€‚

ç”¨`while`è¯­å¥é‡å¤æ‰§è¡Œæ»¡è¶³æ¡ä»¶æ‰ä¼šåœçš„ä»£ç å—ã€‚å¾ªç¯æ¡ä»¶å¯ä»¥åœ¨æœ«å°¾ï¼Œä»¥ç¡®ä¿å¾ªç¯è‡³å°‘è¿è¡Œä¸€æ¬¡ã€‚
```swift
var n = 2
while n < 100 {
    n *= 2
}
print(n)
// Prints "128"

var m = 2
repeat {
    m *= 2
} while m < 100
print(m)
// Prints "128"
```

> è¯•ä¸€è¯•ï¼šå°†æ¡ä»¶ä»`m < 100`å˜æ¢ä¸º`m < 0`çœ‹çœ‹ `while`å’Œ`repeat-while`åœ¨æ¡ä»¶ä¸º`false`çš„æ—¶å€™è¡Œä¸ºæœ‰ä»€ä¹ˆä¸åŒã€‚

å¯ä»¥ä½¿ç”¨`..<`æ“ä½œç¬¦ç”Ÿæˆä¸€ç³»åˆ—ç´¢å¼•æ¥ä¿æŒç´¢å¼•å¾ªç¯ã€‚
```swift
var total = 0
for i in 0..<4 {
  total += i
}
print(total)
// Prints "6"
```

ç”¨`..<`åˆ›å»ºä¸€ä¸ªä¸åŒ…å«ä¸Šé™çš„èŒƒå›´ï¼Œç”¨`...`åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸Šä¸‹é™çš„èŒƒå›´ã€‚

### å‡½æ•°å’Œé—­åŒ…
ç”¨`func`å£°æ˜å‡½æ•°ã€‚ç”¨å‡½æ•°ååé¢è·Ÿä¸Šæ‹¬å·æ‹¬èµ·çš„å‚æ•°æ¥è°ƒç”¨å‡½æ•°ã€‚ç”¨`->`å°†å‚æ•°å’Œå‡½æ•°çš„è¿”å›ç±»å‹éš”å¼€ã€‚
```swift
func greet(person: String, day: String) -> String {
    return "Hello \(person), today is \(day)."
}
greet(person: "Bob", day: "Tuesday")
```

> è¯•ä¸€è¯•
> å»æ‰`day`å‚æ•°ï¼Œæ·»åŠ ä¸€ä¸ªå…³äºåˆé¤é—®å€™çš„å‚æ•°ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡½æ•°ç”¨å½¢å‚åä½œä¸ºå®å‚çš„æ ‡å¿—ã€‚å¯ä»¥åœ¨å½¢å‚å‰é¢æ·»åŠ å®å‚æ ‡ç­¾ï¼Œæˆ–ç”¨ä¸‹åˆ’çº¿ï¼ˆ`_`ï¼‰æ ‡æ˜ä¸ç”¨å®å‚æ ‡ç­¾ã€‚
```swift
func greet(_ person: String, on day: String) -> String {
    return "Hello \(person), today is \(day)."
}
greet("John", on: "Wednesday")
```

ç”¨å…ƒç»„æ„å»ºå¤åˆå€¼ã€‚ä¾‹å¦‚ï¼Œç”¨å‡½æ•°è¿”å›å¤šä¸ªå€¼ã€‚å…ƒç»„çš„å…ƒç´ å¯ä»¥é€šè¿‡åç§°æˆ–æ•°å­—è®¿é—®ã€‚
```swift
func calculateStatistics(scores: [Int]) -> (min: Int, max: Int, sum: Int) {
    var min = scores[0]
    var max = scores[0]
    var sum = 0

    for score in scores {
        if score > max {
            max = score
        } else if score < min {
            min = score
        }
        sum += score
    }

    return (min, max, sum)
}
let statistics = calculateStatistics(scores: [5, 3, 100, 3, 9])
print(statistics.sum)
// Prints "120"
print(statistics.2)
// Prints "120"
```

å‡½æ•°å¯ä»¥åµŒå¥—ã€‚åµŒå¥—å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°ä¸­å£°æ˜çš„å˜é‡ã€‚ä½ å¯ä»¥ç”¨åµŒå¥—å‡½æ•°ç®¡ç†ï¼ˆå¤–éƒ¨ï¼‰å‡½æ•°ä¸­é•¿æˆ–å¤æ‚çš„ä»£ç ã€‚
```swift
func returnFifteen() -> Int {
  var y = 10
  func add() {
    y += 5
  }
  add()
  return y
}

returnFifteen()
```

å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ç±»å‹ï¼ˆfirst-class type)ã€‚è¿™æ„å‘³ç€å‡½æ•°å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ã€‚
```swift
func makeIncrementer() -> ((Int) -> Int) {
    func addOne(number: Int) -> Int {
        return 1 + number
    }
    return addOne
}
var increment = makeIncrementer()
increment(7)
```

ä¸€ä¸ªå‡½æ•°å¯ä»¥æŠŠå¦ä¸€ä¸ªå‡½æ•°å½“ä½œå®å‚ä½¿ç”¨ã€‚
```swift
func hasAnyMatches(list: [Int], condition: (Int) -> Bool) -> Bool {
    for item in list {
        if condition(item) {
            return true
        }
    }
    return false
}
func lessThanTen(number: Int) -> Bool {
    return number < 10
}
var numbers = [20, 19, 7, 12]
hasAnyMatches(list: numbers, condition: lessThanTen)
```

å®é™…ä¸Šï¼Œå‡½æ•°æ˜¯é—­åŒ…çš„ç‰¹ä¾‹ï¼šä¸€ä¸ªå¯ä»¥ç¨åè°ƒç”¨çš„ä»£ç å—ã€‚é—­åŒ…ä¸­çš„ä»£ç å¯ä»¥è®¿é—®åœ¨é—­åŒ…è¢«åˆ›å»ºçš„ä½œç”¨åŸŸä¸­å¯ç”¨çš„å˜é‡å’Œå‡½æ•°ï¼Œå³ä¾¿é—­åŒ…åœ¨ä¸åŒçš„ä½œç”¨åŸŸè¢«ä½¿ç”¨ --- åœ¨ä½¿ç”¨åµŒå¥—å‡½æ•°çš„æ—¶å€™ï¼Œä½ å·²ç»çœ‹åˆ°äº†è¿™æ ·çš„ä¾‹å­ã€‚ä½ å¯ä»¥ç”¨å¤§æ‹¬å·ï¼ˆ`{}`ï¼‰æ‹¬èµ·ä»£ç ä»è€Œåˆ›å»ºä¸€ä¸ªæ— åé—­åŒ…ã€‚ç”¨`in`å…³é”®å­—å°†å®å‚å’Œè¿”å›å€¼ä¸å‡½æ•°ä½“åˆ†å¼€ã€‚
```swift
numbers.map({ (number: Int) -> Int in
   let result = 3 * number
   return result
})
```
> è¯•ä¸€è¯•ï¼šé‡å†™é—­åŒ…ï¼Œå½“`result`æ˜¯å¥‡æ•°æ—¶ï¼Œè¿”å›`0`ã€‚

å¯ä»¥é€šè¿‡å‡ ä¸ªæ–¹å¼æ›´ç®€æ´åœ°ç¼–å†™é—­åŒ…ã€‚å½“é—­åŒ…çš„ç±»å‹å·²çŸ¥æ—¶ï¼Œä¾‹å¦‚ï¼Œ`delegate`çš„å›è°ƒã€‚å¯ä»¥çœç•¥å‚æ•°çš„ç±»å‹ã€è¿”å›å€¼æˆ–ä¸¤è€…éƒ½çœç•¥ã€‚å•ä¸ªè¯­å¥é—­åŒ…éšå¼è¿”å›å…¶å”¯ä¸€è¯­å¥çš„å€¼ã€‚
```swift
let mappedNumbers = numbers.map({ number in 3 * number})
print(mappedNumbers)
// Prints "[60, 57, 21, 36]"
```

ä½ å¯ä»¥ç”¨æ•°å­—æ¥å¼•ç”¨å‚æ•°ï¼Œè¿™åœ¨çŸ­çš„é—­åŒ…ä¸­å¾ˆæœ‰ç”¨ã€‚ä½œä¸ºå‡½æ•°æœ€åä¸€ä¸ªå‚æ•°çš„é—­åŒ…ï¼Œå¯ä»¥ç›´æ¥æ”¾åœ¨æ‹¬å·åé¢ä½¿ç”¨ã€‚å½“é—­åŒ…æ˜¯å”¯ä¸€çš„å‚æ•°çš„æ—¶å€™ï¼Œå¯ä»¥çœç•¥æ‹¬å·ã€‚
```swift
let sortedNumbers = numbers.sorted { $0 > $1 }
print(sortedNumbers)
// Prints "[20, 19, 12 ,7]"
```

### å¯¹è±¡å’Œç±»

åœ¨`class`å…³é”®å­—åé¢åŠ ä¸Šç±»åçš„æ–¹å¼åˆ›å»ºç±»ã€‚ç±»çš„å±æ€§å£°æ˜æ–¹å¼ä¸å˜é‡å’Œå¸¸é‡ç›¸åŒï¼Œåªæ˜¯å®ƒåªå­˜åœ¨äºç±»çš„ä¸Šä¸‹æ–‡ä¸­ã€‚åŒæ ·ï¼Œæ–¹æ³•çš„å£°æ˜è·Ÿå‡½æ•°çš„å£°æ˜æ–¹å¼ä¸€è‡´ã€‚
```swift
class Shape {
  var numberOfSides = 0
  func simpleDescription() -> String {
    return "A shape with \(numberOfSides) sides."
  }
}
```
> è¯•ä¸€è¯•ï¼šç”¨`let`æ·»åŠ ä¸€ä¸ªå¸¸é‡å±æ€§ï¼Œæ·»åŠ ä¸€ä¸ªä½¿ç”¨å‚æ•°çš„æ–¹æ³•ã€‚

ç”¨ç±»ååé¢æ¥æ‹¬å·çš„æ–¹å¼åˆ›å»ºç±»çš„å®ä¾‹ã€‚ç”¨ç‚¹å·ï¼ˆ`.`ï¼‰è®¿é—®å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•ã€‚
```swift
var shape = Shape()
shape.numberOfSides = 7
var shapeDescription = shape.simpleDescription()
```

è¿™ä¸ªç‰ˆæœ¬çš„`Shape`ç±»ç¼ºäº†ä¸€ä¸ªé‡è¦çš„ä¸œè¥¿ï¼šåˆ›å»ºç±»å®ä¾‹çš„æ—¶å€™è®¾ç½®ç±»çš„åˆå§‹åŒ–æ–¹æ³•ã€‚ç”¨`init`åˆ›å»ºã€‚
```swift
class NamesShape {
  var numberOfSides: Int = 0
  var name: String

  init(name: String) {
    self.name = name
  }

  func simpleDescription() -> String {
    return "A shape with \(numberOfSides) sides."
  }
}
```
æ³¨æ„`self`æ˜¯å¦‚ä½•è¢«ç”¨äºåœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­åŒºåˆ†å±æ€§`name`å’Œå®å‚`name`çš„ã€‚åˆ›å»ºç±»çš„å®ä¾‹çš„æ—¶å€™ï¼Œåˆå§‹åŒ–æ–¹æ³•çš„å®å‚å°†åƒå‡½æ•°è°ƒç”¨ä¸€æ ·ä¼ é€’ã€‚æ¯ä¸ªå±æ€§éƒ½éœ€è¦è¢«èµ‹å€¼â€”â€”åœ¨å£°æ˜ä¸­ï¼ˆ`numberOfSides`ï¼‰æˆ–åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼ˆ`name`ï¼‰ã€‚

å¦‚æœæƒ³åœ¨å¯¹è±¡è¢«å›æ”¶å‰æ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œï¼Œè¯·ä½¿ç”¨`deinit`åˆ›å»ºååˆå§‹åŒ–æ–¹æ³•ã€‚

å­ç±»åœ¨ç±»ååé¢åŠ ä¸Šçˆ¶ç±»åï¼Œç”¨å†’å·ï¼ˆ`:`ï¼‰éš”å¼€ã€‚ç±»æ— éœ€ç»§æ‰¿è‡ªæ ‡å‡†æ ¹ç±»ï¼Œæ‰€ä»¥ä½ å¯ä»¥æ ¹æ®éœ€è¦çœç•¥çˆ¶ç±»åç§°ã€‚

å­ç±»ä¸­é‡å†™äº†çš„çˆ¶ç±»æ–¹æ³•å®ç°çš„æ–¹æ³•ï¼Œç”¨`override`æ ‡è®°ï¼Œå¦‚æœæ„å¤–é‡å†™äº†æ–¹æ³•ï¼Œè€Œæ²¡æœ‰æ ‡è®°`override`ï¼Œç¼–è¯‘å™¨å°†æŠ¥é”™ã€‚ç¼–è¯‘å™¨ä¹Ÿä¼šæ£€æµ‹æ ‡è®°æœ‰`override`ä½†å®é™…ä¸Šæ²¡æœ‰é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚
```swift
class Square: NamedShape {
    var sideLength: Double

    init(sideLength: Double, name: String) {
        self.sideLength = sideLength
        super.init(name: name)
        numberOfSides = 4
    }

    func area() -> Double {
        return sideLength * sideLength
    }

    override func simpleDescription() -> String {
        return "A square with sides of length \(sideLength)."
    }
}
let test = Square(sideLength: 5.2, name: "my test square")
test.area()
test.simpleDescription()
```
> è¯•ä¸€è¯•ï¼šåˆ›å»ºä¸€ä¸ªä»¥åŠå¾„å’Œåç§°ä¸ºåˆå§‹åŒ–å‚æ•°ï¼Œåä¸º`Circle`çš„`NamedShape`çš„å­ç±»ã€‚å®ç°`area()`å’Œ`simpleDescription()`æ–¹æ³•ã€‚

é™¤äº†ç®€å•å±æ€§çš„å‚¨å­˜ä¹‹å¤–ï¼Œå±æ€§ä¹Ÿå¯ä»¥æœ‰`getter`å’Œ`setter`æ–¹æ³•ã€‚
```swift
class EquilateralTriangle: NamedShape {
  var sideLength: Double = 0.0

  init(sideLength: Double, name: String) {
    self.sideLength = sideLength
    self.init(name: name)
    numberOfSides = 3
  }

  var perimeter: Double {
    get {
      return 3.0 * sideLength
    }
    set {
      sideLength = newValue / 3.0
    }
  }

  override func simpleDescription() -> String {
    return "An equilateral triangle with sides of length \(sideLength)."
  }
}
```
åœ¨`perimeter`çš„`setter`æ–¹æ³•ä¸­ï¼Œæ–°çš„å€¼æœ‰ä¸€ä¸ªéšå¼çš„åç§°`newValue`ã€‚ä½ å¯ä»¥åœ¨`set`åé¢åŠ ä¸Šæ‹¬å·åœ¨æ‹¬å·ä¸­æä¾›æ˜¾å¼åç§°ã€‚

æ³¨æ„`EquilateralTriangle`çš„åˆå§‹åŒ–æ–¹æ³•æœ‰ä¸‰ä¸ªä¸åŒæ­¥éª¤ï¼š
1. ç»™å­ç±»å£°æ˜çš„å±æ€§èµ‹å€¼
2. è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•
3. æ”¹å˜è¢«çˆ¶ç±»å®šä¹‰çš„å±æ€§çš„å€¼ã€‚ä»»ä½•åˆ©ç”¨æ–¹æ³•ï¼Œ`getter`æˆ–`setter`çš„é™„åŠ è®¾ç½®éƒ½å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œã€‚

å¦‚æœä½ ä¸éœ€è¦è®¡ç®—å±æ€§ï¼Œä½†æ˜¯ä»ç„¶éœ€è¦åœ¨è®¾ç½®å±æ€§å€¼å‰åæ‰§è¡Œä»£ç ï¼Œç”¨`willSet`å’Œ`didSet`ã€‚ä½ æä¾›çš„ä»£ç åœ¨åˆå§‹åŒ–æ–¹æ³•ä¹‹å¤–æ”¹å˜æ—¶ä¼šè¢«æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç±»ç¡®ä¿ä¸‰è§’å½¢çš„è¾¹é•¿ä¸å››è¾¹å½¢çš„è¾¹é•¿ç›¸ç­‰ã€‚
```swift
class TriangleAndSquare {
  var triangle: EquilateralTriangle {
    willSet {
      square.sideLength = newValue.sideLength
    }
  }
  var square: Square {
    willSet {
      triangle.sideLength = newValue.sideLength
    }
  }
  init(size: Double, name: String) {
    square = Square(sideLength: size, name: name)
    triangle = EquilateralTriangle(sideLength: size, name: name)
  }
}
var triangleAndSquare = TriangleAndSquare(size: 10, name: "another test shape")
print(triangleAndSquare.square.sideLength)
// Prints "10.0"
print(triangleAndSquare.triangle.sideLength)
// Prints "10.0"
triangleAndSquare.square = Square(sideLength: 50, name: "larger square")
print(triangleAndSquare.triangle.sideLength)
// Prints "50.0"
```

å½“ä½¿ç”¨å¯é€‰å€¼æ—¶ï¼Œä½ å¯ä»¥åœ¨æ–¹æ³•ï¼Œå±æ€§æˆ–è§’æ ‡å‰å†™ä¸Š`?`ã€‚å¦‚æœé—®å·ä¹‹å‰çš„å€¼æ˜¯`nil`ï¼Œåˆ™é—®å·åé¢çš„ä¸€åˆ‡ä¼šè¢«å¿½ç•¥ï¼Œæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼ä¹Ÿå°†æ˜¯`nil`ã€‚å¦åˆ™ï¼Œå¯é€‰å€¼çš„å€¼å°†è¢«è§£åŒ…ï¼Œé—®å·ä¹‹åçš„ä¸€äº›è¿ç®—å°†ç”¨è§£åŒ…çš„å€¼ã€‚ä¸Šé¢ä¸¤ç§æƒ…å†µä¸‹ï¼Œæ•´ä¸ªè¡¨è¾¾å¼æˆä¸ºä¸€ä¸ªå¯é€‰å€¼ã€‚
```swift
let optionalSquare: Square? = Square(sideLength: 2.5, name: "optional square")
let sideLength = optionalSquare?.sideLength
```

### æšä¸¾å’Œç»“æ„ä½“
ç”¨`enum`å…³é”®å­—åˆ›å»ºæšä¸¾ã€‚ä¸ç±»å’Œå…¶ä»–çš„æ‰€æœ‰ç±»å‹ä¸€æ ·ï¼Œæšä¸¾å¯ä»¥æœ‰ç›¸å…³çš„æ–¹æ³•ã€‚
```swift
enum Rank: Int {
  case ace = 1
  case two, three, four, five, six, seven, eight, nine, ten
  case jack, queen, king

  func simpleDescription() -> String {
    switch self {
          case .ace:
              return "ace"
          case .jack:
              return "jack"
          case .queen:
              return "queen"
          case .king:
              return "king"
          default:
              return String(self.rawValue)
        }  
    }
}
let ace = Rank.ace
let aceRawValue = ace.rawValue
```
> è¯•ä¸€è¯•ï¼š å†™ä¸€ä¸ªé€šè¿‡æ¯”è¾ƒRankåŸå§‹å€¼æ¥æ¯”è¾ƒRankçš„å‡½æ•°ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼ŒSwiftä»0å¼€å§‹åˆ¶å®šåŸå§‹å€¼ï¼Œæ¯æ¬¡å¢åŠ ä¸€æ¬¡ï¼Œä½†ä½ å¯ä»¥æ˜¾å¼æŒ‡å®šå€¼æ¥æ”¹å˜è¿™ä¸€è¡Œä¸ºã€‚`ace`è¢«æ˜¾å¼åˆ¶å®šä¸º1ï¼Œå‰©ä¸‹çš„æŒ‰é¡ºåºä¸€æ¬¡è¢«åˆ¶å®šã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æµ®ç‚¹æ•°æˆ–å­—ç¬¦ä¸²ä½œä¸ºæšä¸¾çš„åŸå§‹å€¼ã€‚ç”¨`rawValue`å±æ€§æ¥è®¿é—®æšä¸¾çš„åŸå§‹å€¼ã€‚

ç”¨`init?(rawValue:)`åˆå§‹åŒ–æ–¹æ³•ä»åŸå§‹å€¼åˆ›å»ºæšä¸¾çš„å®ä¾‹ã€‚è¿™å°†è¿”å›ç¬¦åˆåŸå§‹å€¼çš„æšä¸¾åˆ†æ”¯ï¼Œå¦‚æœæ²¡æœ‰ç›¸ç¬¦åˆçš„è¯è¿”å›`nil`ã€‚
```swift
if let convertedRank = Rank(rawValue: 3) {
  let threeDescription = convertedRank.simpleDescription()
}
```

æšä¸¾çš„åˆ†æ”¯å€¼å°±æ˜¯å®é™…å€¼ï¼Œå¹¶ä¸æ˜¯åŸå§‹å€¼çš„å¦ä¸€ä¸ªä¹¦å†™æ–¹å¼ã€‚å®é™…ä¸Šï¼Œä½ æ²¡å¿…è¦ä¸ºæ²¡æœ‰æ„ä¹‰çš„åŸå§‹å€¼æä¾›ä¸€ä¸ªå€¼ã€‚
```swift
enum Suit {
  case spades, hearts, diamonds, clubs

    func simpleDescription() -> String {
        switch self {
        case .spades:
            return "spades"
        case .hearts:
            return "hearts"
        case .diamonds:
            return "diamonds"
        case .clubs:
            return "clubs"
        }
    }
}
let hearts = Suit.hearts
let heartDescription = hearts.simpleDescription()
```

> è¯•ä¸€è¯•ï¼šæ·»åŠ ä¸€ä¸ª`color()`æ–¹æ³•ï¼Œä¸ºspadeså’Œclubsè¿”å›â€œblackâ€ï¼Œä¸ºdiamondsè¿”å›â€œredâ€ã€‚

æ³¨æ„ä¸Šé¢æšä¸¾ä¸­`hearts`è¢«ä½¿ç”¨çš„ä¸¤ç§æ–¹å¼ï¼šå½“ç»™`hearts`å¸¸é‡èµ‹å€¼æ—¶ï¼Œç”¨çš„æ˜¯æšä¸¾åˆ†æ”¯çš„å…¨å`Suit.hearts`ï¼Œå› ä¸ºè¯¥å¸¸é‡æ²¡æœ‰æ˜¾å¼æŒ‡å®šç±»å‹ã€‚åœ¨`switch`è¯­å¥ä¸­ï¼Œä½¿ç”¨æšä¸¾åˆ†æ”¯çš„ç¼©å†™`.hearts`ï¼Œå› ä¸º`self`æŒ‡çš„å°±æ˜¯`Suit`æœ¬èº«ã€‚ä½ å¯ä»¥çŸ¥é“å€¼çš„ç±»å‹çš„æ—¶å€™ä½¿ç”¨ç¼©å†™ã€‚

å¦‚æœæšä¸¾æœ‰åŸå§‹æ•°å€¼ï¼Œåˆ™è¿™äº›å€¼å°†ä½œä¸ºå£°æ˜çš„ä¸€éƒ¨åˆ†è¢«ç¡®å®šï¼Œè¿™æ„å‘³ç€ç‰¹å®šæšä¸¾åˆ†æ”¯çš„æ¯ä¸ªå®ä¾‹å…·æœ‰ç›¸åŒçš„åŸå§‹å€¼ã€‚æšä¸¾çš„å¦ä¸€ç§ç”¨æ³•æ˜¯ç»™åˆ†æ”¯è®¾å®šå…³è”å€¼â€”â€”è¿™äº›å€¼åœ¨ä½ åˆ›å»ºå®ä¾‹çš„æ—¶å€™è¢«ç¡®å®šï¼Œæ¯ä¸ªåˆ†æ”¯å®ä¾‹çš„å…³è”å€¼å¯ä»¥ä¸åŒã€‚ä½ å¯ä»¥å°†å…³è”å€¼ç†è§£æˆè¯¥æšä¸¾åˆ†æ”¯å®ä¾‹çš„å‚¨å­˜å±æ€§ã€‚ä¾‹å¦‚ï¼šè€ƒè™‘ä¸€ä¸‹ä»æœåŠ¡å™¨è¯·æ±‚æ—¥å‡ºå’Œæ—¥è½æ—¶é—´çš„æƒ…å†µï¼ŒæœåŠ¡å™¨è¦ä¹ˆå›å¤è¯·æ±‚çš„ä¿¡æ¯ï¼Œè¦ä¹ˆå›å¤å‡ºé”™çš„æè¿°ã€‚
```swift
enum ServerResponse {
  case result(String, String)
  case failure(String)
}

let success = ServerResponse.result("6:00 am", "8:09 pm")
let failure = ServerResponse.failure("Out of cheese.")

switch success {
  case let .result(sunrise, sunset):
    print("Sunrise is at \(sunrise) and sunset is at \(sunset)")
  case let .failure(message):
    print("Failure...\(message)")
}
// Prints "Sunrise is at 6:00 am and sunset is at 8:09 pm."
```

> è¯•ä¸€è¯•ï¼šä¸ºServerResponseå’Œswitchæ·»åŠ ç¬¬ä¸‰ä¸ªåˆ†æ”¯ã€‚

æ³¨æ„å¦‚ä½•ä»`ServerResponse`ä¸­æŠ½å–`sunrise`å’Œ`sunset`çš„å€¼ï¼Œå¹¶ä½œä¸ºåŒ¹é…switchåˆ†æ”¯çš„ä¸€éƒ¨åˆ†ã€‚

ç”¨`struct`å…³é”®å­—åˆ›å»ºç»“æ„ä½“ã€‚ç»“æ„ä½“æ”¯æŒè®¸å¤šä¸ç±»ç›¸åŒçš„è¡Œä¸ºï¼ŒåŒ…æ‹¬æ–¹æ³•å’Œåˆå§‹åŒ–æ–¹æ³•ã€‚ç»“æ„ä½“ä¸ç±»æœ€å¤§çš„ä¸åŒåœ¨äºï¼Œç»“æ„ä½“åœ¨ä»£ç ä¸­è¢«ä¼ é€’æ—¶æ€»æ˜¯ä¼šè¢«å¤åˆ¶ï¼Œè€Œç±»åªä¼ é€’å¼•ç”¨ã€‚
```swift
struct Card {
    var rank: Rank
    var suit: Suit
    func simpleDescription() -> String {
        return "The \(rank.simpleDescription()) of \
      (suit.simpleDescription())"
    }
}

let threeOfSpades = Card(rank: .three, suit: .spades)
let threeOfSpadesDescription = threeOfSpades.simpleDescription()
```

> è¯•ä¸€è¯•ï¼šå†™ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å¡ç‰‡çš„æ•°ç»„ï¼Œæ¯å¼ å¡ç‰‡å¯¹åº”ä¸€ä¸ªç­‰çº§å’Œå¥—è£…çš„ç»„åˆã€‚

### å¹¶å‘
ç”¨`async`æ ‡è®°ä¸€ä¸ªå¼‚æ­¥è¿è¡Œçš„å‡½æ•°ã€‚
```swift
func fetchUserID(from server: String) async -> Int {
    if server == "primary" {
        return 97
    }
    return 501
}
```

åœ¨å¼‚æ­¥å‡½æ•°å‰é¢å†™å…¥`await`æ¥æ ‡è®°å¯¹å¼‚æ­¥å‡½æ•°çš„è°ƒç”¨ã€‚
```swift
func fetchUsername(from server: String) async -> String {
    let userID = await fetchUserID(from: server)
    if userID == 501 {
        return "John Appleseed"
    }
    return "Guest"
}
```

ç”¨`async let`è°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼Œä»è€Œè®©å…¶ä¸å…¶ä»–ä»£ç å¹¶è¡Œè¿è¡Œã€‚å½“ä½ è¦ç”¨å®ƒçš„è¿”å›å€¼æ—¶ï¼Œç”¨`await`ã€‚
```swift
func connectUser(to server: String) async {
    async let userID = fetchUserID(from: server)
    async let username = fetchUsername(from: server)
    let greeting = await "Hello \(username), user ID \(userID)."
    print(greeting)
}
```

ç”¨`Task`åœ¨åŒæ­¥ä»£ç ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼Œä¸ç”¨ç­‰å¾…å¼‚æ­¥å‡½æ•°çš„è¿”å›ã€‚
```swift
Task {
    await connectUser(to: "primary")
}
```

ç”¨ Task Group ç»“æ„åŒ–å¹¶å‘ä»£ç ã€‚
```swift
let userIDs = await withTaskGroup(of: Int.self) { group in
    for server in ["primary", "secondary", "development"] {
        group.addTask {
            return await fetchUserID(from: server)
        }
    }

    var results: [Int] = []
    for await result in group {
        results.append(result)
    }
    return results
}
```

`Actor`ä¸ç±»ï¼ˆ`Class`ï¼‰ç±»ä¼¼ï¼Œæ­¤å¤–`Actors`è¿˜ä¿è¯ä¸åŒçš„å¼‚æ­¥æ–¹æ³•å¯ä»¥åŒæ—¶å®‰å…¨åœ°ä¸åŒä¸€ä¸ª`Actor`çš„å®ä¾‹äº¤äº’ã€‚
```swift
actor ServerConnection {
    var server: String = "primary"
    private var activeUsers: [Int] = []
    func connect() async -> Int {
        let userID = await fetchUserID(from: server)
        // ... communicate with server ...
        activeUsers.append(userID)
        return userID
    }
}
```

å½“è°ƒç”¨ä¸€ä¸ª `Actor` å®ä¾‹çš„æ–¹æ³•æˆ–è®¿é—®å®ƒçš„ä¸€ä¸ªå±æ€§æ—¶ï¼Œç”¨ `await` æ ‡è®°ä»¥è¡¨æ˜å¯èƒ½éœ€è¦ç­‰å¾…å…¶ä»–åœ¨ actor ä¸­æ­£åœ¨è¿è¡Œçš„ä»£ç ã€‚
```swift
let server = ServerConnect()
let userID = await server.connect()
```

### åè®®å’Œæ‰©å±•
ç”¨`protocol`å£°æ˜ä¸€ä¸ªåè®®ã€‚
```swift
protocol ExampleProtocol {
  var simpleDescription: String { get }
  mutating func adjust()
}
```
ç±»ï¼Œæšä¸¾å’Œç»“æ„ä½“å¯ä»¥å®ç°åè®®ã€‚
```swift
class SimpleClass: ExampleProtocol {
    var simpleDescription: String = "A very simple class."
    var anotherProperty: Int = 69105
    func adjust() {
        simpleDescription += "  Now 100% adjusted."
    }
}
var a = SimpleClass()
a.adjust()
let aDescription = a.simpleDescription

struct SimpleStructure: ExampleProtocol {
    var simpleDescription: String = "A simple structure"
    mutating func adjust() {
        simpleDescription += " (adjusted)"
    }
}
var b = SimpleStructure()
b.adjust()
let bDescription = b.simpleDescription
```

> è¯•ä¸€è¯•ï¼š ç»™`ExampleProtocol`æ·»åŠ ä¸€ä¸ªéœ€æ±‚ã€‚ä¸ºäº†å®ç°`ExampleProtocol`åè®®ï¼Œ`SimpleClass` å’Œ `SimpleStructure` éœ€è¦ä½œå‡ºä»€ä¹ˆæ”¹å˜ï¼Ÿ

æ³¨æ„åœ¨ `SimpleStruct` çš„å£°æ˜ä¸­ç”¨ `mutating` å…³é”®å­—æ ‡è®°èƒ½ä¿®æ”¹ç»“æ„ä½“å†…å®¹çš„æ–¹æ³•ã€‚`SimpleClass` ç±»ä¸­ä¸éœ€è¦å°†æ–¹æ³•æ ‡è®°æˆå¯å˜ï¼Œå› ä¸ºç±»çš„æ–¹æ³•æ€»æ˜¯èƒ½å¤Ÿä¿®æ”¹ç±»çš„å†…å®¹ã€‚

ç”¨`extension`å…³é”®å­—ç»™å·²æœ‰çš„ç±»å‹æ·»åŠ åŠŸèƒ½ï¼Œä¾‹å¦‚æ–°æ–¹æ³•å’Œè®¡ç®—å±æ€§ã€‚ä½ å¯ä»¥ç”¨æ‰©å±•ç»™å…¶ä»–åœ°æ–¹å®šä¹‰çš„ç±»å‹æ·»åŠ åè®®ï¼Œæˆ–è€…ç›´æ¥ç»™ä»æŸä¸€ä¸ªæ¡†æ¶å¯¼å…¥çš„ç±»å‹æ·»åŠ æ‰©å±•ã€‚
```swift
extension Int: ExampleProtocol {
  var simpleDescription: String {
    return "The number \(self)"
  }
  mutating func adjust() {
    self += 42
  }
}
print(7.simpleDescription)
// Prints "The number 7"
```

> è¯•ä¸€è¯•ï¼šè·Ÿdoubleç±»å‹æ·»åŠ ä¸€ä¸ªabsoluteValueå±æ€§çš„æ‰©å±•ã€‚

ä½ å¯ä»¥åƒä½¿ç”¨ä»»ä½•ä¸€ä¸ªç±»å‹åä¸€æ ·ä½¿ç”¨åè®®åï¼Œä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ç»„å®ç°äº†åŒæ ·åè®®çš„ä¸åŒå¯¹è±¡ã€‚å½“ä½¿ç”¨åè®®ç±»å‹çš„å€¼æ—¶ï¼Œåè®®å®šä¹‰ä¹‹å¤–çš„æ–¹æ³•ä¸å¯ç”¨ã€‚
```swift
let protocolValue: any ExampleProtocol = a
print(protocolValue.simpleDescription)
// Prints "A very simple class.  Now 100% adjusted."
// print(protocolValue.anotherProperty)  // Uncomment to see the error
```

å³ä½¿å˜é‡`protocolValue`åœ¨è¿è¡Œæ—¶æœ‰ä¸€ä¸ª`SimpleClass`ç±»å‹ï¼Œç¼–è¯‘å™¨ä»æŠŠå®ƒçœ‹åš`ExampleProtocol`ç±»å‹ã€‚è¿™æ„å‘³ç€é™¤äº†åè®®ä¸€è‡´æ€§ä¹‹å¤–ï¼Œä½ ä¸ä¼šæ— æ„åœ°è®¿é—®åˆ°ç±»æ‰€å®ç°çš„æ–¹æ³•å’Œå±æ€§ã€‚

### é”™è¯¯å¤„ç†

ä½ å¯ä»¥ç”¨å®ç°äº†`Error`åè®®çš„ä»»ä½•ç±»å‹è¡¨ç¤ºé”™è¯¯ã€‚
```swift
enum PrinterError: Error {
  case outOfPaper
  case noToner
  case onFire
}
```

ç”¨`throw`å…³é”®å­—æŠ›å‡ºé”™è¯¯ï¼Œç”¨`throws`å…³é”®å­—æ ‡è®°æˆ–æŠ›å‡ºé”™è¯¯çš„å‡½æ•°ã€‚å¦‚æœä½ åœ¨å‡½æ•°ä¸­æŠ›å‡ºé”™è¯¯ï¼Œå‡½æ•°ä¼šç«‹å³è¿”å›ï¼Œè°ƒç”¨å‡½æ•°çš„ä»£ç å°†è´Ÿè´£å¤„ç†é”™è¯¯ã€‚
```swift
func send(job: Int, toPrinter printerName: String) throws -> String {
  if printerName == "Never Has Toner" {
    throw PrinterError.noToner
  }
  return "Job sent"
}
```

æœ‰å‡ ç§å¯ä»¥å¤„ç†é”™è¯¯çš„æ–¹æ³•ã€‚ä¸€ç§æ˜¯ç”¨`do-catch`ã€‚åœ¨`do`ä»£ç å—ä¸­ï¼Œç”¨`try`å…³é”®å­—æ ‡è®°å¯èƒ½æŠ›å‡ºé”™è¯¯çš„ä»£ç ã€‚åœ¨`catch`ä»£ç å—ä¸­ï¼Œå¦‚æœä½ ä¸æŒ‡å®šä¸€ä¸ªä¸åŒåç§°ï¼Œé”™è¯¯ä¼šè¢«è‡ªåŠ¨å‘½åä¸º`error`ã€‚
```swift
do {
  let printerResponse = try send(job: 1040, toPrinter: "Bi Sheng")
  print(printerResponse)
} catch {
  print(error)
}
// Prints "Job sent"
```

> è¯•ä¸€è¯•ï¼šå°†æ‰“å°æœºåæ”¹ä¸ºâ€œNever Has Tonerâ€ï¼Œè®©sendæ–¹æ³•æŠ›å‡ºé”™è¯¯ã€‚

ä½ å¯ä»¥ç”¨å¤šä¸ª`catch`æ¥å¤„ç†ç‰¹å®šçš„é”™è¯¯ã€‚å°±åƒå¤„ç†switchåˆ†æ”¯ä¸€æ ·åœ¨`catch`åé¢å†™ä¸Šä¸€ä¸ªæ¨¡å¼ã€‚
```swift
do {
    let printerResponse = try send(job: 1440, toPrinter: "Gutenberg")
    print(printerResponse)
} catch PrinterError.onFire {
    print("I'll just put this over here, with the rest of the fire.")
} catch let printerError as PrinterError {
    print("Printer error: \(printerError).")
} catch {
    print(error)
}
// Prints "Job sent"
```

> è¯•ä¸€è¯•ï¼šæ·»åŠ åœ¨doä»£ç å—ä¸­æ•è·é”™è¯¯çš„ä»£ç ã€‚æŠ›å‡ºä»€ä¹ˆé”™è¯¯å°†ä¼šè¢«ç¬¬ä¸€ä¸ªcatchæ•è·å‘¢ï¼Ÿç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‘¢ï¼Ÿ

å¦ä¸€ç§å¤„ç†é”™è¯¯çš„æ–¹å¼æ˜¯ç”¨`try?`å…³é”®å­—æŠŠé”™è¯¯è½¬å˜ä¸ºå¯é€‰å€¼ã€‚å¦‚æœå‡½æ•°æŠ›å‡ºé”™è¯¯ï¼ŒæŒ‡å®šçš„é”™è¯¯ä¼šè¢«æŠ›å¼ƒï¼Œè¿”å›çš„ç»“æœæ˜¯`nil`ã€‚å¦åˆ™ï¼Œç»“æœå°±æ˜¯ä¸€ä¸ªåŒ…å«è¿”å›å€¼çš„å¯é€‰å€¼ã€‚
```swift
let printerSuccess = try? send(job: 1884, toPrinter: "Mergenthaler")
let printerFailure = try? send(job: 1885, toPrinter: "Never Has Toner")
```

ç”¨`defer`å…³é”®å­—ç¼–å†™å‡½æ•°ä¸­æ‰€æœ‰ä»£ç è¢«æ‰§è¡Œä¹‹åå†æ‰§è¡Œçš„ä»£ç å—ï¼Œåœ¨å‡½æ•°è¿”å›ä¹‹å‰ã€‚ä»£ç çš„æ‰§è¡Œä¼šå¿½è§†å‡½æ•°æŠ›å‡ºé”™è¯¯ã€‚ä½ å¯ä»¥å°†é…ç½®å’Œæ¸…ç†ä»£ç å†™åœ¨ä¸€èµ·ï¼Œå³ä½¿å®ƒä»¬åœ¨ä¸åŒçš„æ—¶é—´è¢«æ‰§è¡Œã€‚
```swift
var fridgeIsOpen = false
let fridgeContent = ["milk", "eggs", "leftovers"]

func fridgeContent(_ food: String) -> Bool {
  fridgeIsOpen = true
  defer {
    fridgeIsOpen = false
  }

  let result = fridgeContent.contains(food)
  return result
}
fridgeContent("banana")
print(fridgeIsOpen)
// Prints "false"
```

### æ³›å‹

ç”¨åœ¨å°–æ‹¬å·ä¸­å†™ä¸Šåç§°çš„æ–¹å¼åˆ›å»ºæ³›å‹å‡½æ•°æˆ–æ³›å‹ç±»å‹ã€‚
```swift
func makeArray<Item>(repeating item: Item, numberOfItems: Int) -> [Item] {
  var result = [Item]()
  for _ in 0..<numberOfTimes {
    result.append(item)
  }
  return result
}
makeArray(repeating: "knock", numberOfTimes: 4)
```

ä½ å¯ä»¥åˆ›å»ºå‡½æ•°å’Œæ–¹æ³•çš„æ³›å‹ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºç±»ï¼Œæšä¸¾å’Œç»“æ„ä½“çš„æ³›å‹ã€‚
```swift
// Reimplement the Swift standard library's optional type
enum OptionalValue<Wrapped> {
  case none
  case some(Wrapped)
}
var possibleInteger: OptionalValue<Int> = .none
possibleInteger = .some(100)
```

åœ¨æ–¹æ³•ä½“å‰é¢å†™å…¥`where`ä»¥æŒ‡å®šä¸€ç³»åˆ—éœ€æ±‚ï¼Œä¾‹å¦‚ï¼Œè¦æ±‚æŸä¸€ç±»å‹å®ç°æŸä¸€åè®®ï¼Œè¦æ±‚ä¸¤ç§ç±»å‹ç›¸åŒï¼Œæˆ–è¦æ±‚æŸä¸€ç±»ç»§æ‰¿è‡ªæŸä¸€çˆ¶ç±»ã€‚
```swift
func anyCommonElements<T: Sequence, U: Sequence>(_ lhs: T, _ rhs: U) -> Bool
  where T.Element: Equatable, T.Element == U.Element
{
    for lhsItem in lhs {
      for rhsItem in rhs {
        if lhsItem == rhsItem {
          return true
        }
      }
    }
    return false
}
anyCommonElements([1, 2, 3], [3])
```

> è¯•ä¸€è¯•ï¼šä¿®æ”¹`anyCommonElements(_:_:) `æ–¹æ³•ï¼Œè¿”å›ä¸¤è€…çš„äº¤é›†æ•°ç»„ã€‚

`<T: Equatable>`ä¸`<T> ... where T: Equatable`ç›¸åŒã€‚


[< ç‰ˆæœ¬å…¼å®¹](2.Version_Compatibility.md) || [åŸºç¡€ >](../Language_Guide/Basic_Operators.md)
